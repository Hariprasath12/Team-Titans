<!DOCTYPE html>
<html lang="en">
	<head>
		{{> head title="Carbon Footprint - Tree"}}
		<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	</head>
	<body>
		<div id="header">
			{{> topNav}}
		</div>
		<div id="content">
		  	<div class="container">
		  		<div class="tree-container">
		  			<h1>You have<br><span id="leafPoints">0</span><br>Leaf Points</h1>		  			
			  		<button id="create-tree-button">Create a Tree</button>
			  		<h3>You need 1000 leaf points to create a tree.</h3>			  		
		  		</div>
		  	</div>
		</div>
		<div id="footer">
			{{> bottomNav}}
		</div>
		<script src="./dist/bundle.js"></script>
		<script type="text/javascript">			
			function loadJSON(callback) {
			    var xobj = new XMLHttpRequest();
			    xobj.overrideMimeType("application/json");
			    xobj.open('GET', 'sample_data', true);
			    xobj.onreadystatechange = function () {
			    		// console.log(xobj.readyState);
			    		// console.log(xobj.status);
			          if (xobj.readyState == 4 && xobj.status == "200") {
			          	// console.log(xobj);
			            callback(xobj.responseText);
			          }
			    };
			    xobj.send(null);  
			 }

			 loadJSON(function(response) {
			    var my_tanso = JSON.parse(response);
			    var pointsElt = document.getElementById("leafPoints");
			    pointsElt.innerHTML = my_tanso.total_carbon_stats.total_leaf_points;
			    if(my_tanso.total_carbon_stats.total_leaf_points < 1000) {
			    	document.getElementById("create-tree-button").style.display = 'none';
			    }
			 });
		</script>
	</body>
</html>